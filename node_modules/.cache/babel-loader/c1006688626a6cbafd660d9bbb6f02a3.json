{"ast":null,"code":"import _slicedToArray from\"/Users/brian/Downloads/AKAGURIRO__revamp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,withRouter}from'react-router-dom';import{useDispatch,useSelector}from\"react-redux\";import SearchRoundedIcon from'@material-ui/icons/SearchRounded';import LanguageIcon from'@material-ui/icons/Language';import MenuIcon from'@material-ui/icons/Menu';import{useTranslation}from'react-i18next';import i18n from'../i18n';import PersonRoundedIcon from'@material-ui/icons/PersonRounded';import ShoppingCartRoundedIcon from'@material-ui/icons/ShoppingCartRounded';import Badge from'@material-ui/core/Badge';import{logout}from\"../redux/actions/userActions\";import'../styles/Header.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Header(_ref){var location=_ref.location,history=_ref.history;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showUser=_useState2[0],setShowUser=_useState2[1];var _useState3=useState('en'),_useState4=_slicedToArray(_useState3,2),lang=_useState4[0],setLang=_useState4[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.cart;}),cartItems=_useSelector.cartItems;var _useSelector2=useSelector(function(state){return state.userLogin;}),userInfo=_useSelector2.userInfo;var logoutHandler=function logoutHandler(){dispatch(logout());history.push(\"/\");};useEffect(function(){setShowUser(false);console.log(userInfo);var wi=window.innerWidth;if(wi<478){setSearch(false);}},[location]);useEffect(function(){window.addEventListener('resize',function(){var wi=window.innerWidth;if(wi<578){setSearch(false);}else{setSearch(true);}});},[window.innerHeight]);var _useTranslation=useTranslation(),t=_useTranslation.t;// HANDLE CHANGE LANGUAGE\nvar handleLanguage=function handleLanguage(Language){i18n.changeLanguage(Language);};useEffect(function(){handleLanguage(lang);},[lang]);var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var showSearch=function showSearch(){setSearch(!search);};var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),productSearch=_useState8[0],setProductSearch=_useState8[1];// const handleSearch = () =>{\n//     dispatch(searchProduct(productSearch))   \n// }\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"menu\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Akaguriro\"})}),search&&/*#__PURE__*/_jsxs(\"div\",{className:\"searchBar\",children:[/*#__PURE__*/_jsx(\"input\",{value:productSearch,onChange:function onChange(e){return setProductSearch(e.target.value);},placeholder:\"Search your product here\",type:\"text\"}),/*#__PURE__*/_jsx(SearchRoundedIcon,{})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tools\",children:[/*#__PURE__*/_jsx(SearchRoundedIcon,{className:\"showSearch\",onClick:showSearch}),/*#__PURE__*/_jsx(\"div\",{className:\"tools__login\",children:userInfo?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user\",onClick:function onClick(){return setShowUser(!showUser);},children:[/*#__PURE__*/_jsx(PersonRoundedIcon,{}),/*#__PURE__*/_jsx(\"h4\",{children:userInfo.name})]}),showUser&&/*#__PURE__*/_jsxs(\"ul\",{className:\"userInfo\",children:[/*#__PURE__*/_jsx(\"li\",{onClick:logoutHandler,children:t('Logout')}),/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:/*#__PURE__*/_jsx(\"li\",{children:t('Profile')})}),userInfo.isAdmin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/users\",children:/*#__PURE__*/_jsx(\"li\",{children:t('Users')})}),/*#__PURE__*/_jsx(Link,{to:\"/products\",children:/*#__PURE__*/_jsx(\"li\",{children:t('Products')})})]})]})]}):/*#__PURE__*/_jsx(Link,{to:\"login\",children:/*#__PURE__*/_jsx(\"h4\",{children:t('Login')})})}),/*#__PURE__*/_jsxs(Link,{to:\"/myCart\",children:[/*#__PURE__*/_jsx(Badge,{badgeContent:cartItems.reduce(function(acc,item){return acc+item.qty;},0),color:\"secondary\",children:/*#__PURE__*/_jsx(ShoppingCartRoundedIcon,{})}),/*#__PURE__*/_jsx(\"h4\",{children:\"Cart\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"tools__language\",children:lang==='fr'?/*#__PURE__*/_jsx(\"img\",{src:\"/england-icon.png\",onClick:function onClick(){return setLang('en');}}):/*#__PURE__*/_jsx(\"img\",{src:\"/france-icon.png\",onClick:function onClick(){return setLang('fr');}})})]})]})});}export default withRouter(Header);","map":{"version":3,"sources":["/Users/brian/Downloads/AKAGURIRO__revamp/frontend/src/components/Header.js"],"names":["React","useState","useEffect","Link","withRouter","useDispatch","useSelector","SearchRoundedIcon","LanguageIcon","MenuIcon","useTranslation","i18n","PersonRoundedIcon","ShoppingCartRoundedIcon","Badge","logout","Header","location","history","showUser","setShowUser","lang","setLang","dispatch","state","cart","cartItems","userLogin","userInfo","logoutHandler","push","console","log","wi","window","innerWidth","setSearch","addEventListener","innerHeight","t","handleLanguage","Language","changeLanguage","search","showSearch","productSearch","setProductSearch","e","target","value","name","isAdmin","reduce","acc","item","qty"],"mappings":"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","sourcesContent":["import React,{ useState,useEffect } from 'react'\nimport { Link,withRouter } from 'react-router-dom'\nimport { useDispatch, useSelector } from \"react-redux\";\nimport SearchRoundedIcon from '@material-ui/icons/SearchRounded';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport { useTranslation } from 'react-i18next';\nimport i18n from '../i18n'\nimport PersonRoundedIcon from '@material-ui/icons/PersonRounded';\nimport ShoppingCartRoundedIcon from '@material-ui/icons/ShoppingCartRounded';\nimport Badge from '@material-ui/core/Badge';\nimport { logout } from \"../redux/actions/userActions\";\nimport '../styles/Header.scss'\n\nfunction Header({location,history}) {\n\n    const [showUser, setShowUser] = useState(false)\n    const [lang,setLang] = useState('en')\n    const dispatch = useDispatch();\n\n    const { cartItems } = useSelector((state) => state.cart);\n    const { userInfo } = useSelector((state) => state.userLogin);\n\n    const logoutHandler = () => {\n        dispatch(logout());\n        history.push(\"/\")\n    };\n\n    useEffect(() => {\n        setShowUser(false)\n        console.log(userInfo)\n        let wi = window.innerWidth\n        if(wi < 478){\n            setSearch(false)\n        }\n    }, [location])\n\n    useEffect(() => {\n        window.addEventListener('resize', ()=>{\n            let wi = window.innerWidth\n            if(wi < 578){\n                setSearch(false)\n            } else{\n                setSearch(true)\n            }\n        });\n    }, [window.innerHeight])\n\n    const { t } = useTranslation();\n    \n    // HANDLE CHANGE LANGUAGE\n    const handleLanguage = (Language)=> {\n        i18n.changeLanguage(Language)\n    }\n\n    useEffect(() => {\n        handleLanguage(lang)\n    }, [lang])\n\n    const [search, setSearch] = useState(true)\n    const showSearch = ()=>{ setSearch(!search) }\n\n    const [productSearch, setProductSearch] = useState('')\n\n    // const handleSearch = () =>{\n    //     dispatch(searchProduct(productSearch))   \n    // }\n\n    return (\n        <div className=\"header\">\n            <div className=\"header__top\">\n                <div className=\"menu\">\n                    <Link to='/'><h3>Akaguriro</h3></Link>\n                    { search &&\n                    <div className=\"searchBar\">\n                        <input value={productSearch} onChange={(e)=>setProductSearch(e.target.value)} placeholder=\"Search your product here\" type=\"text\"/>\n                        <SearchRoundedIcon/>\n                    </div>\n                    }\n                </div>\n                \n                <div className=\"tools\">\n                    <SearchRoundedIcon className=\"showSearch\" onClick={showSearch}/>\n                    <div className=\"tools__login\">\n                        { userInfo ? \n                            <>\n                            <div className=\"user\" onClick={()=>setShowUser(!showUser)}>\n                                <PersonRoundedIcon/>\n                                <h4>{userInfo.name}</h4>\n                            </div>\n                            \n                            \n                            {showUser && \n                            <ul className=\"userInfo\">\n                                <li onClick={logoutHandler}>{t('Logout')}</li>\n                                <Link to=\"/profile\"><li>{t('Profile')}</li></Link>\n                                {userInfo.isAdmin && \n                                <>\n                                <Link to=\"/users\"><li>{t('Users')}</li></Link>\n                                <Link to=\"/products\"><li>{t('Products')}</li></Link>\n                                </>}\n                            </ul>}\n\n                            </> : <Link to=\"login\"><h4>{t('Login')}</h4></Link>\n                        }\n                    </div>\n                    <Link to='/myCart'>\n                        <Badge badgeContent={cartItems.reduce((acc, item) => acc + item.qty, 0)} color=\"secondary\">\n                            <ShoppingCartRoundedIcon/>\n                        </Badge>\n                        <h4>Cart</h4>\n                    </Link>\n                    <div className=\"tools__language\">\n                        { lang === 'fr' ? \n                            <img src=\"/england-icon.png\" onClick={()=>setLang('en')}/> \n                            : <img src=\"/france-icon.png\" onClick={()=>setLang('fr')}/>\n                        }\n                        \n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default withRouter(Header)\n"]},"metadata":{},"sourceType":"module"}