{"ast":null,"code":"import React,{useEffect}from'react';import Button from'@material-ui/core/Button';import{useDispatch,useSelector}from\"react-redux\";import{addToCart,removeFromCart}from\"../redux/actions/cartActions\";import'../styles/MyCart.scss';import{withRouter}from'react-router-dom';import{useTranslation}from'react-i18next';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CartPage(_ref){var match=_ref.match,history=_ref.history,location=_ref.location;var _useTranslation=useTranslation(),t=_useTranslation.t;var productId=match.params.id;var qty=location.search?Number(location.search.split(\"=\")[1]):1;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;useEffect(function(){dispatch(addToCart(productId,qty));console.log(cart);},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkouthandler=function checkouthandler(id){history.push(\"/login?redirect=shipping\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"myCart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"myCart__table\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"myCart__list\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:t('Product')}),/*#__PURE__*/_jsx(\"td\",{children:t('Name')}),/*#__PURE__*/_jsx(\"td\",{children:t('Price')}),/*#__PURE__*/_jsx(\"td\",{children:t('Quantity')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cartItems&&cartItems.length>0?cartItems.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"product\",children:/*#__PURE__*/_jsx(\"img\",{src:product.images[0]})}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[product.price,\"BIF\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{value:product.qty,onChange:function onChange(e){dispatch(addToCart(product.id,Number(e.target.value)));},children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4\"})]})})]},product.id);}):/*#__PURE__*/_jsx(\"div\",{children:\"Your cart is empty\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"myCart__total\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('Cart total')}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Shipping :\",/*#__PURE__*/_jsx(\"span\",{children:\"Free Shipping\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal :\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0),\" BIF\"]}),/*#__PURE__*/_jsx(Button,{onClick:checkouthandler,children:t('Proceed to chekout')})]})]});}export default withRouter(CartPage);","map":{"version":3,"sources":["/Users/brian/Downloads/AKAGURIRO__revamp/frontend/src/pages/CartPage.js"],"names":["React","useEffect","Button","useDispatch","useSelector","addToCart","removeFromCart","withRouter","useTranslation","CartPage","match","history","location","t","productId","params","id","qty","search","Number","split","dispatch","cart","state","cartItems","console","log","removeFromCartHandler","checkouthandler","push","length","map","product","images","name","price","e","target","value","reduce","acc","item"],"mappings":"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","sourcesContent":["import React, { useEffect }  from 'react'\nimport Button from '@material-ui/core/Button';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addToCart, removeFromCart } from \"../redux/actions/cartActions\";\nimport '../styles/MyCart.scss'\nimport { withRouter } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\n\nfunction CartPage({match, history, location}) {\n\n    const {t}= useTranslation()\n\n    const productId = match.params.id;\n    const qty = location.search ? Number(location.search.split(\"=\")[1]) : 1;\n\n    const dispatch = useDispatch();\n\n    const cart = useSelector((state) => state.cart);\n    const { cartItems } = cart;\n\n    useEffect(() => {\n        dispatch(addToCart(productId, qty));\n        console.log(cart)\n    }, [dispatch, productId, qty]);\n\n    const removeFromCartHandler = (id) => {\n        dispatch(removeFromCart(id));\n    };\n    const checkouthandler = (id) => {\n        history.push(\"/login?redirect=shipping\");\n    };\n    \n    return (\n        <div className=\"myCart\">\n            <div className=\"myCart__table\">\n                <table className=\"myCart__list\">\n                    <thead>\n                        <tr>\n                            <td>{t('Product')}</td>\n                            <td>{t('Name')}</td>\n                            <td>{t('Price')}</td>\n                            <td>{t('Quantity')}</td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            cartItems && cartItems.length > 0 ? \n                            cartItems.map( product =>{\n                                return(\n                                    <tr key={product.id}>\n                                        <td className=\"product\"><img src={product.images[0]}/></td>\n                                        <td>{product.name}</td>\n                                        <td>{ product.price }BIF</td>\n                                        <td>\n                                            <select value={product.qty} onChange={(e) => {dispatch(addToCart(product.id, Number(e.target.value)));}}>\n                                                <option value=\"1\">1</option>\n                                                <option value=\"2\">2</option>\n                                                <option value=\"3\">3</option>\n                                                <option value=\"4\">4</option>\n                                            </select>\n                                        </td>\n                                    </tr>\n                                )\n                            }): <div>Your cart is empty</div>\n                        }\n                    </tbody>\n                </table>\n            </div>\n            <div className=\"myCart__total\">\n                <h3>{t('Cart total')}</h3>\n                <p>Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)}) items</p>\n                <p>Shipping :<span>Free Shipping</span></p>\n                <p>Subtotal :{cartItems.reduce((acc, item) => acc + item.qty * item.price, 0)} BIF</p>\n                <Button onClick={checkouthandler}>{t('Proceed to chekout')}</Button>\n            </div>\n        </div>\n    )\n}\n\nexport default withRouter(CartPage)\n"]},"metadata":{},"sourceType":"module"}