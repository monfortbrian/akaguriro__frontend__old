{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nvar _helpers = require('./helpers');\n\nvar _keyboardEvents = require('./keyboardEvents');\n\nvar _EventsWrapper = require('./EventsWrapper');\n\nvar _EventsWrapper2 = _interopRequireDefault(_EventsWrapper);\n\nvar _Zoom = require('./Zoom');\n\nvar _Zoom2 = _interopRequireDefault(_Zoom);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar isControlled = function isControlled(isZoomed) {\n  return isZoomed !== null && isZoomed !== undefined;\n};\n\nvar focusableTabIndex = 0;\nvar unfocusableTabIndex = -1;\n\nvar ImageZoom = function (_Component) {\n  _inherits(ImageZoom, _Component);\n\n  function ImageZoom(props) {\n    _classCallCheck(this, ImageZoom);\n\n    var _this = _possibleConstructorReturn(this, (ImageZoom.__proto__ || Object.getPrototypeOf(ImageZoom)).call(this, props));\n\n    _this.state = {\n      isDisabled: false,\n      isZoomed: false,\n      wasZoomed: false,\n      src: props.image.src,\n      prevSrc: props.image.src,\n      isClosing: false\n    };\n    _this._handleKeyDown = _this._handleKeyDown.bind(_this);\n    _this._handleLoad = _this._handleLoad.bind(_this);\n    _this._handleLoadError = _this._handleLoadError.bind(_this);\n    _this._handleUnzoom = _this._handleUnzoom.bind(_this);\n    _this._handleZoom = _this._handleZoom.bind(_this);\n    return _this;\n  }\n\n  _createClass(ImageZoom, [{\n    key: 'componentDidUpdate',\n\n    /**\n     * When the component's state updates, check for changes\n     * and either zoom or start the unzoom procedure.\n     * NOTE: We need to differentiate whether this is a\n     * controlled or uncontrolled component and do the check\n     * based off of that.\n     */\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!isControlled(prevProps.isZoomed) && isControlled(this.props.isZoomed)) {\n        throw new Error(_defaults2.default.errors.uncontrolled);\n      } else if (isControlled(prevProps.isZoomed) && !isControlled(this.props.isZoomed)) {\n        throw new Error(_defaults2.default.errors.controlled);\n      }\n\n      var prevIsZoomed = isControlled(prevProps.isZoomed) ? prevProps.isZoomed : prevState.isZoomed;\n      var isZoomed = isControlled(this.props.isZoomed) ? this.props.isZoomed : this.state.isZoomed;\n\n      if (prevIsZoomed !== isZoomed && !isZoomed && this.portalInstance) {\n        this.portalInstance.unzoom({\n          force: true\n        });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          defaultStyles = _props.defaultStyles,\n          image = _props.image,\n          propsIsZoomed = _props.isZoomed,\n          shouldRespectMaxDimension = _props.shouldRespectMaxDimension,\n          zoomImage = _props.zoomImage,\n          zoomMargin = _props.zoomMargin,\n          _state = this.state,\n          isDisabled = _state.isDisabled,\n          stateIsZoomed = _state.isZoomed,\n          src = _state.src,\n          isClosing = _state.isClosing;\n      /**\n       * Take whatever attributes you want to pass the image\n       * and then override with the properties we need,\n       * including using state as source of truth for hi/low-res\n       * version img src.\n       * Also, disable any clicking if the component is\n       * already at its maximum dimensions.\n       */\n\n      var attrs = _extends({}, !isDisabled && {\n        tabIndex: focusableTabIndex\n      }, image, {\n        src: src,\n        style: this._getImageStyle()\n      }, !isDisabled && {\n        onMouseDown: this._preventFocus,\n        onClick: this._handleZoom,\n        onKeyDown: this._handleKeyDown\n      });\n\n      var isZoomed = isControlled(propsIsZoomed) ? propsIsZoomed : stateIsZoomed;\n      return _react2.default.createElement(_react.Fragment, null, _react2.default.createElement('img', _extends({}, attrs, {\n        key: 'image',\n        ref: function ref(x) {\n          _this2.image = x;\n        },\n        onLoad: this._handleLoad,\n        onError: this._handleLoadError\n      })), this.image && (isZoomed || isClosing) ? _react2.default.createElement(_EventsWrapper2.default, {\n        key: 'portal',\n        ref: function ref(node) {\n          _this2.portalInstance = node;\n        },\n        controlledEventFn: this._getControlledEventFn(),\n        allowAccessibilityClose: this._allowTabNavigation()\n      }, _react2.default.createElement(_Zoom2.default, {\n        defaultStyles: defaultStyles,\n        image: this.image,\n        shouldRespectMaxDimension: shouldRespectMaxDimension,\n        zoomImage: zoomImage,\n        zoomMargin: Number(zoomMargin),\n        onUnzoom: this._handleUnzoom\n      })) : null);\n    }\n    /**\n     * If the image should not exceed its original\n     * dimensions AND there is no zoomImage AND the\n     * image is already rendered at its maximum dimensions,\n     * then we shouldn't try to zoom it at all. We currently\n     * only do this on componentDidMount, though on window\n     * resize could be something to consider if necessary.\n     */\n\n  }, {\n    key: '_checkShouldDisableComponent',\n    value: function _checkShouldDisableComponent() {\n      var _props2 = this.props,\n          shouldRespectMaxDimension = _props2.shouldRespectMaxDimension,\n          zoomImage = _props2.zoomImage;\n      var isDisabled = shouldRespectMaxDimension && !zoomImage && (0, _helpers.isMaxDimension)(this.image);\n      this.setState({\n        isDisabled: isDisabled\n      });\n    }\n  }, {\n    key: '_getImageStyle',\n    value: function _getImageStyle() {\n      var _props3 = this.props,\n          defaultStyles = _props3.defaultStyles,\n          image = _props3.image,\n          isZoomedP = _props3.isZoomed,\n          _state2 = this.state,\n          isDisabled = _state2.isDisabled,\n          isZoomedSt = _state2.isZoomed,\n          isClosing = _state2.isClosing;\n      var isHidden = isZoomedSt || isZoomedP || isClosing;\n      return _extends({}, _defaults2.default.styles.image, isHidden && {\n        visibility: 'hidden'\n      }, defaultStyles.image, image.style, isDisabled && {\n        cursor: 'inherit'\n      });\n    }\n    /**\n     * We need to wait for the main image\n     * to load before we can do any width/height\n     * checks on it.\n     */\n\n  }, {\n    key: '_handleLoad',\n    value: function _handleLoad(e) {\n      this._checkShouldDisableComponent();\n\n      var cb = this.props.image.onLoad || Function.prototype;\n      cb(e);\n    }\n  }, {\n    key: '_handleLoadError',\n    value: function _handleLoadError(e) {\n      this.setState({\n        isDisabled: true\n      });\n      var cb = this.props.image.onError || Function.prototype;\n      cb(e);\n    }\n  }, {\n    key: '_handleKeyDown',\n    value: function _handleKeyDown(e) {\n      if ((0, _keyboardEvents.isEnterOrSpaceBarKey)(e)) {\n        e.preventDefault();\n\n        this._handleZoom(e);\n      }\n    }\n  }, {\n    key: '_preventFocus',\n    value: function _preventFocus(e) {\n      e.preventDefault();\n    }\n  }, {\n    key: '_handleZoom',\n    value: function _handleZoom(e) {\n      if (!isControlled(this.props.isZoomed) && this.props.shouldHandleZoom(e)) {\n        this.setState({\n          isZoomed: true\n        }, this.props.onZoom);\n      } else {\n        this.props.onZoom();\n      }\n    }\n    /**\n     * This gets passed to the zoomed component as a callback\n     * to trigger when the time is right to shut down the zoom.\n     * If `shouldReplaceImage`, update the normal image we're showing\n     * with the zoomed image -- useful when wanting to replace a low-res\n     * image with a high-res one once it's already been downloaded.\n     * It also cleans up the zoom references and then updates state.\n     */\n\n  }, {\n    key: '_handleUnzoom',\n    value: function _handleUnzoom(src, allowRefocus) {\n      var _this3 = this;\n\n      return function () {\n        var changes = _extends({\n          isZoomed: false,\n          isClosing: false\n        }, _this3.props.shouldReplaceImage && {\n          src: src\n        });\n\n        _this3.setState(changes, _this3.props.onUnzoom);\n\n        if (allowRefocus && _this3._allowTabNavigation()) {\n          _this3.image.focus();\n        }\n      };\n    }\n  }, {\n    key: '_getControlledEventFn',\n    value: function _getControlledEventFn() {\n      return isControlled(this.props.isZoomed) ? this.props.onUnzoom : null;\n    }\n  }, {\n    key: '_allowTabNavigation',\n    value: function _allowTabNavigation() {\n      return this.image && this.image.tabIndex !== unfocusableTabIndex;\n    }\n  }], [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, state) {\n      /**\n       * When component is controlled, we need a flag\n       * set when it's about to close in order to keep\n       * hiding the original image on the page until the\n       * unzooming is complete\n       */\n      var isClosing = state.wasZoomed && !props.isZoomed || state.isClosing; // If the consumer wants to change the image's src, then so be it.\n\n      var src = props.image.src !== state.prevSrc ? props.image.src : state.src;\n      return {\n        src: src,\n        isClosing: isClosing,\n        // Keep track of previous props\n        wasZoomed: props.isZoomed,\n        prevSrc: props.image.src\n      };\n    }\n  }, {\n    key: 'defaultProps',\n    get: function get() {\n      return {\n        shouldReplaceImage: true,\n        shouldRespectMaxDimension: false,\n        zoomMargin: 40,\n        defaultStyles: {\n          zoomContainer: {},\n          overlay: {},\n          image: {},\n          zoomImage: {}\n        },\n        shouldHandleZoom: function shouldHandleZoom() {\n          return true;\n        },\n        onZoom: function onZoom() {},\n        onUnzoom: function onUnzoom() {}\n      };\n    }\n  }]);\n\n  return ImageZoom;\n}(_react.Component);\n\nexports.default = ImageZoom;\nImageZoom.propTypes = {\n  image: (0, _propTypes.shape)({\n    src: _propTypes.string.isRequired,\n    alt: _propTypes.string,\n    className: _propTypes.string,\n    style: _propTypes.object\n  }).isRequired,\n  zoomImage: (0, _propTypes.shape)({\n    src: _propTypes.string,\n    alt: _propTypes.string,\n    className: _propTypes.string,\n    style: _propTypes.object\n  }),\n  defaultStyles: _propTypes.object,\n  isZoomed: _propTypes.bool,\n  shouldHandleZoom: _propTypes.func,\n  shouldReplaceImage: _propTypes.bool,\n  shouldRespectMaxDimension: _propTypes.bool,\n  onZoom: _propTypes.func,\n  onUnzoom: _propTypes.func\n};","map":{"version":3,"sources":["/Users/brian/Downloads/AKAGURIRO__revamp/frontend/node_modules/react-medium-image-zoom/lib/ImageZoom.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_defaults","_defaults2","_helpers","_keyboardEvents","_EventsWrapper","_EventsWrapper2","_Zoom","_Zoom2","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","isControlled","isZoomed","undefined","focusableTabIndex","unfocusableTabIndex","ImageZoom","_Component","_this","getPrototypeOf","state","isDisabled","wasZoomed","src","image","prevSrc","isClosing","_handleKeyDown","bind","_handleLoad","_handleLoadError","_handleUnzoom","_handleZoom","componentDidUpdate","prevProps","prevState","Error","errors","uncontrolled","controlled","prevIsZoomed","portalInstance","unzoom","force","render","_this2","_props","defaultStyles","propsIsZoomed","shouldRespectMaxDimension","zoomImage","zoomMargin","_state","stateIsZoomed","attrs","tabIndex","style","_getImageStyle","onMouseDown","_preventFocus","onClick","onKeyDown","createElement","Fragment","ref","x","onLoad","onError","node","controlledEventFn","_getControlledEventFn","allowAccessibilityClose","_allowTabNavigation","Number","onUnzoom","_checkShouldDisableComponent","_props2","isMaxDimension","setState","_props3","isZoomedP","_state2","isZoomedSt","isHidden","styles","visibility","cursor","e","cb","Function","isEnterOrSpaceBarKey","preventDefault","shouldHandleZoom","onZoom","allowRefocus","_this3","changes","shouldReplaceImage","focus","getDerivedStateFromProps","get","zoomContainer","overlay","Component","propTypes","shape","string","isRequired","alt","className","object","bool","func"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nvar _helpers = require('./helpers');\n\nvar _keyboardEvents = require('./keyboardEvents');\n\nvar _EventsWrapper = require('./EventsWrapper');\n\nvar _EventsWrapper2 = _interopRequireDefault(_EventsWrapper);\n\nvar _Zoom = require('./Zoom');\n\nvar _Zoom2 = _interopRequireDefault(_Zoom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar isControlled = function isControlled(isZoomed) {\n  return isZoomed !== null && isZoomed !== undefined;\n};\nvar focusableTabIndex = 0;\nvar unfocusableTabIndex = -1;\n\nvar ImageZoom = function (_Component) {\n  _inherits(ImageZoom, _Component);\n\n  function ImageZoom(props) {\n    _classCallCheck(this, ImageZoom);\n\n    var _this = _possibleConstructorReturn(this, (ImageZoom.__proto__ || Object.getPrototypeOf(ImageZoom)).call(this, props));\n\n    _this.state = {\n      isDisabled: false,\n      isZoomed: false,\n      wasZoomed: false,\n      src: props.image.src,\n      prevSrc: props.image.src,\n      isClosing: false\n    };\n\n    _this._handleKeyDown = _this._handleKeyDown.bind(_this);\n    _this._handleLoad = _this._handleLoad.bind(_this);\n    _this._handleLoadError = _this._handleLoadError.bind(_this);\n    _this._handleUnzoom = _this._handleUnzoom.bind(_this);\n    _this._handleZoom = _this._handleZoom.bind(_this);\n    return _this;\n  }\n\n  _createClass(ImageZoom, [{\n    key: 'componentDidUpdate',\n\n\n    /**\n     * When the component's state updates, check for changes\n     * and either zoom or start the unzoom procedure.\n     * NOTE: We need to differentiate whether this is a\n     * controlled or uncontrolled component and do the check\n     * based off of that.\n     */\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!isControlled(prevProps.isZoomed) && isControlled(this.props.isZoomed)) {\n        throw new Error(_defaults2.default.errors.uncontrolled);\n      } else if (isControlled(prevProps.isZoomed) && !isControlled(this.props.isZoomed)) {\n        throw new Error(_defaults2.default.errors.controlled);\n      }\n\n      var prevIsZoomed = isControlled(prevProps.isZoomed) ? prevProps.isZoomed : prevState.isZoomed;\n      var isZoomed = isControlled(this.props.isZoomed) ? this.props.isZoomed : this.state.isZoomed;\n      if (prevIsZoomed !== isZoomed && !isZoomed && this.portalInstance) {\n        this.portalInstance.unzoom({ force: true });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          defaultStyles = _props.defaultStyles,\n          image = _props.image,\n          propsIsZoomed = _props.isZoomed,\n          shouldRespectMaxDimension = _props.shouldRespectMaxDimension,\n          zoomImage = _props.zoomImage,\n          zoomMargin = _props.zoomMargin,\n          _state = this.state,\n          isDisabled = _state.isDisabled,\n          stateIsZoomed = _state.isZoomed,\n          src = _state.src,\n          isClosing = _state.isClosing;\n\n      /**\n       * Take whatever attributes you want to pass the image\n       * and then override with the properties we need,\n       * including using state as source of truth for hi/low-res\n       * version img src.\n       * Also, disable any clicking if the component is\n       * already at its maximum dimensions.\n       */\n\n      var attrs = _extends({}, !isDisabled && { tabIndex: focusableTabIndex }, image, { src: src, style: this._getImageStyle() }, !isDisabled && {\n        onMouseDown: this._preventFocus,\n        onClick: this._handleZoom,\n        onKeyDown: this._handleKeyDown\n      });\n      var isZoomed = isControlled(propsIsZoomed) ? propsIsZoomed : stateIsZoomed;\n\n      return _react2.default.createElement(\n        _react.Fragment,\n        null,\n        _react2.default.createElement('img', _extends({}, attrs, {\n          key: 'image',\n          ref: function ref(x) {\n            _this2.image = x;\n          },\n          onLoad: this._handleLoad,\n          onError: this._handleLoadError\n        })),\n        this.image && (isZoomed || isClosing) ? _react2.default.createElement(\n          _EventsWrapper2.default,\n          {\n            key: 'portal',\n            ref: function ref(node) {\n              _this2.portalInstance = node;\n            },\n            controlledEventFn: this._getControlledEventFn(),\n            allowAccessibilityClose: this._allowTabNavigation()\n          },\n          _react2.default.createElement(_Zoom2.default, {\n            defaultStyles: defaultStyles,\n            image: this.image,\n            shouldRespectMaxDimension: shouldRespectMaxDimension,\n            zoomImage: zoomImage,\n            zoomMargin: Number(zoomMargin),\n            onUnzoom: this._handleUnzoom\n          })\n        ) : null\n      );\n    }\n\n    /**\n     * If the image should not exceed its original\n     * dimensions AND there is no zoomImage AND the\n     * image is already rendered at its maximum dimensions,\n     * then we shouldn't try to zoom it at all. We currently\n     * only do this on componentDidMount, though on window\n     * resize could be something to consider if necessary.\n     */\n\n  }, {\n    key: '_checkShouldDisableComponent',\n    value: function _checkShouldDisableComponent() {\n      var _props2 = this.props,\n          shouldRespectMaxDimension = _props2.shouldRespectMaxDimension,\n          zoomImage = _props2.zoomImage;\n\n      var isDisabled = shouldRespectMaxDimension && !zoomImage && (0, _helpers.isMaxDimension)(this.image);\n\n      this.setState({ isDisabled: isDisabled });\n    }\n  }, {\n    key: '_getImageStyle',\n    value: function _getImageStyle() {\n      var _props3 = this.props,\n          defaultStyles = _props3.defaultStyles,\n          image = _props3.image,\n          isZoomedP = _props3.isZoomed,\n          _state2 = this.state,\n          isDisabled = _state2.isDisabled,\n          isZoomedSt = _state2.isZoomed,\n          isClosing = _state2.isClosing;\n\n\n      var isHidden = isZoomedSt || isZoomedP || isClosing;\n\n      return _extends({}, _defaults2.default.styles.image, isHidden && { visibility: 'hidden' }, defaultStyles.image, image.style, isDisabled && { cursor: 'inherit' });\n    }\n\n    /**\n     * We need to wait for the main image\n     * to load before we can do any width/height\n     * checks on it.\n     */\n\n  }, {\n    key: '_handleLoad',\n    value: function _handleLoad(e) {\n      this._checkShouldDisableComponent();\n\n      var cb = this.props.image.onLoad || Function.prototype;\n      cb(e);\n    }\n  }, {\n    key: '_handleLoadError',\n    value: function _handleLoadError(e) {\n      this.setState({ isDisabled: true });\n\n      var cb = this.props.image.onError || Function.prototype;\n      cb(e);\n    }\n  }, {\n    key: '_handleKeyDown',\n    value: function _handleKeyDown(e) {\n      if ((0, _keyboardEvents.isEnterOrSpaceBarKey)(e)) {\n        e.preventDefault();\n        this._handleZoom(e);\n      }\n    }\n  }, {\n    key: '_preventFocus',\n    value: function _preventFocus(e) {\n      e.preventDefault();\n    }\n  }, {\n    key: '_handleZoom',\n    value: function _handleZoom(e) {\n      if (!isControlled(this.props.isZoomed) && this.props.shouldHandleZoom(e)) {\n        this.setState({ isZoomed: true }, this.props.onZoom);\n      } else {\n        this.props.onZoom();\n      }\n    }\n\n    /**\n     * This gets passed to the zoomed component as a callback\n     * to trigger when the time is right to shut down the zoom.\n     * If `shouldReplaceImage`, update the normal image we're showing\n     * with the zoomed image -- useful when wanting to replace a low-res\n     * image with a high-res one once it's already been downloaded.\n     * It also cleans up the zoom references and then updates state.\n     */\n\n  }, {\n    key: '_handleUnzoom',\n    value: function _handleUnzoom(src, allowRefocus) {\n      var _this3 = this;\n\n      return function () {\n        var changes = _extends({ isZoomed: false, isClosing: false }, _this3.props.shouldReplaceImage && { src: src });\n\n        _this3.setState(changes, _this3.props.onUnzoom);\n\n        if (allowRefocus && _this3._allowTabNavigation()) {\n          _this3.image.focus();\n        }\n      };\n    }\n  }, {\n    key: '_getControlledEventFn',\n    value: function _getControlledEventFn() {\n      return isControlled(this.props.isZoomed) ? this.props.onUnzoom : null;\n    }\n  }, {\n    key: '_allowTabNavigation',\n    value: function _allowTabNavigation() {\n      return this.image && this.image.tabIndex !== unfocusableTabIndex;\n    }\n  }], [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, state) {\n      /**\n       * When component is controlled, we need a flag\n       * set when it's about to close in order to keep\n       * hiding the original image on the page until the\n       * unzooming is complete\n       */\n      var isClosing = state.wasZoomed && !props.isZoomed || state.isClosing;\n      // If the consumer wants to change the image's src, then so be it.\n      var src = props.image.src !== state.prevSrc ? props.image.src : state.src;\n\n      return {\n        src: src,\n        isClosing: isClosing,\n        // Keep track of previous props\n        wasZoomed: props.isZoomed,\n        prevSrc: props.image.src\n      };\n    }\n  }, {\n    key: 'defaultProps',\n    get: function get() {\n      return {\n        shouldReplaceImage: true,\n        shouldRespectMaxDimension: false,\n        zoomMargin: 40,\n        defaultStyles: {\n          zoomContainer: {},\n          overlay: {},\n          image: {},\n          zoomImage: {}\n        },\n        shouldHandleZoom: function shouldHandleZoom() {\n          return true;\n        },\n        onZoom: function onZoom() {},\n        onUnzoom: function onUnzoom() {}\n      };\n    }\n  }]);\n\n  return ImageZoom;\n}(_react.Component);\n\nexports.default = ImageZoom;\n\n\nImageZoom.propTypes = {\n  image: (0, _propTypes.shape)({\n    src: _propTypes.string.isRequired,\n    alt: _propTypes.string,\n    className: _propTypes.string,\n    style: _propTypes.object\n  }).isRequired,\n  zoomImage: (0, _propTypes.shape)({\n    src: _propTypes.string,\n    alt: _propTypes.string,\n    className: _propTypes.string,\n    style: _propTypes.object\n  }),\n  defaultStyles: _propTypes.object,\n  isZoomed: _propTypes.bool,\n  shouldHandleZoom: _propTypes.func,\n  shouldReplaceImage: _propTypes.bool,\n  shouldRespectMaxDimension: _propTypes.bool,\n  onZoom: _propTypes.func,\n  onUnzoom: _propTypes.func\n};"]},"metadata":{},"sourceType":"script"}